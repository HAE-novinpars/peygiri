<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>پیگیری وضعیت سرویس</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Vazirmatn:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Vazirmatn', sans-serif;
        }
        #statusResult {
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        .icon-pulse {
            animation: pulse 2s infinite;
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }
    </style>
</head>
<body class="bg-gray-100 dark:bg-gray-900 flex items-center justify-center min-h-screen p-4">

    <div class="w-full max-w-xl mx-auto bg-white dark:bg-gray-800 rounded-2xl shadow-xl p-8 md:p-12">
        <div class="text-center mb-8">
            <!-- Logo Added Here -->
            <img src="https://hae-novinpars.ir/uploads/9f4afe7a23054f0981b0484470ace10c.w_244,h_119,r_k.png.webp" 
                 alt="HAE Logo" 
                 class="mx-auto mb-6 h-16 w-auto"
                 onerror="this.style.display='none'">

            <h1 class="text-3xl md:text-4xl font-bold text-gray-800 dark:text-white mb-2">پیگیری آخرین وضعیت سفارش</h1>
            <p class="text-md text-gray-500 dark:text-gray-400">برای دیدن آخرین به‌روزرسانی، کد رهگیری خود را در زیر وارد کنید.</p>
        </div>

        <!-- Input Section -->
        <div class="flex flex-col sm:flex-row gap-3 mb-6">
            <!-- Placeholder updated -->
            <input type="text" id="trackingInput" class="flex-grow bg-gray-50 border border-gray-300 text-gray-900 text-lg rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 block w-full p-4 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white transition placeholder:text-right" placeholder="مثال: HAE-A5B4C3" autocomplete="off">
            <button id="trackBtn" class="w-full sm:w-auto text-white bg-blue-600 hover:bg-blue-700 focus:ring-4 focus:outline-none focus:ring-blue-300 font-medium rounded-lg text-lg px-8 py-4 text-center dark:bg-blue-500 dark:hover:bg-blue-600 dark:focus:ring-blue-800 transition-transform transform hover:scale-105">
                پیگیری
            </button>
        </div>

        <!-- Status Display Area -->
        <div id="statusResult" class="opacity-0 max-h-0 overflow-hidden bg-gray-50 dark:bg-gray-700/50 rounded-xl p-6">
            <div class="flex items-start gap-4">
                <div id="statusIcon" class="mt-1">
                    <!-- SVG Icon will be injected here -->
                </div>
                <div class="text-right">
                    <h3 id="statusTitle" class="text-xl font-bold"></h3>
                    <p id="statusDescription" class="text-gray-600 dark:text-gray-300 mt-1"></p>
                    <p id="statusTimestamp" class="text-sm text-gray-400 dark:text-gray-500 mt-2"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        // --- DOM Element References ---
        const trackBtn = document.getElementById('trackBtn');
        const trackingInput = document.getElementById('trackingInput');
        const statusResult = document.getElementById('statusResult');
        const statusIcon = document.getElementById('statusIcon');
        const statusTitle = document.getElementById('statusTitle');
        const statusDescription = document.getElementById('statusDescription');
        const statusTimestamp = document.getElementById('statusTimestamp');

        // --- SVG Icons for different statuses ---
        const icons = {
            'pending': `<svg class="w-8 h-8 text-yellow-500 icon-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg>`,
            'in_progress': `<svg class="w-8 h-8 text-orange-500 icon-pulse" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h5M20 20v-5h-5M4 20h5v-5M20 4h-5v5"></path></svg>`,
            'completed': `<svg class="w-8 h-8 text-green-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`,
            'error': `<svg class="w-8 h-8 text-red-500" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg>`
        };

        // --- Database of Tracking Codes and their Statuses (Codes updated to HAE) ---
        const trackingData = {
            "HAE-A5B4C3": {
                status: "تکمیل شده",
                type: "completed",
                description: "سفارش کارت بازرگانی شما تکمیل شده و بزودی برای شما توسط پست ارسال خواهد شد.",
                timestamp: "۱ مرداد ۱۴۰۴، ساعت ۱۶:۳۰"
            },
            "HAE-D8E9F1": {
                status: "در حال انجام",
                type: "in_progress",
                description: "تکنسین‌های ما در حال بررسی و عیب‌یابی دستگاه شما هستند. به زودی شما را در جریان قرار خواهیم داد.",
                timestamp: "۲ مرداد ۱۴۰۴، ساعت ۰۹:۱۵"
            },
            "HAE-G2H3I4": {
                status: "در انتظار",
                type: "pending",
                description: "درخواست سرویس شما دریافت شده و در انتظار تخصیص به یک تکنسین می‌باشد.",
                timestamp: "۲ مرداد ۱۴۰۴، ساعت ۰۸:۰۵"
            },
             "HAE-X1Y2Z3": {
                status: "در حالت تعلیق: منتظر مدارک",
                type: "error",
                description: "انجام سرویس به طور موقت متوقف شده است. ما منتظر رسیدن یک قطعه خاص هستیم. زمان تخمینی رسیدن: ۲ روز کاری.",
                timestamp: "۳۰ تیر ۱۴۰۴، ساعت ۱۱:۰۰"
            }
        };
        
        /**
         * Displays the status information in the result area.
         * @param {object} data - The status data object.
         */
        function displayStatus(data) {
            // Set content
            statusTitle.textContent = data.status;
            statusDescription.textContent = data.description;
            statusTimestamp.textContent = `آخرین به‌روزرسانی: ${data.timestamp}`;
            statusIcon.innerHTML = icons[data.type] || icons['error'];

            // Set colors based on status type
            const colorClasses = {
                pending: 'text-yellow-600 dark:text-yellow-400',
                in_progress: 'text-orange-600 dark:text-orange-400',
                completed: 'text-green-600 dark:text-green-400',
                error: 'text-red-600 dark:text-red-400'
            };
            statusTitle.className = `text-xl font-bold ${colorClasses[data.type]}`;
            
            // Animate the result box into view
            statusResult.classList.remove('opacity-0', 'max-h-0');
            statusResult.classList.add('opacity-100', 'max-h-96'); // Use max-h for smooth transition
        }

        /**
         * Handles the logic for retrieving and displaying the tracking status.
         */
        function handleTrack() {
            const code = trackingInput.value.trim().toUpperCase();

            if (!code) {
                displayStatus({
                    status: "کد نامعتبر",
                    type: "error",
                    description: "لطفا یک کد رهگیری در کادر بالا وارد کنید.",
                    timestamp: new Date().toLocaleString('fa-IR')
                });
                return;
            }

            const data = trackingData[code];

            if (data) {
                displayStatus(data);
            } else {
                displayStatus({
                    status: "کد یافت نشد",
                    type: "error",
                    description: "کد رهگیری وارد شده با هیچ یک از سوابق ما مطابقت ندارد. لطفا کد را بررسی کرده و دوباره تلاش کنید.",
                    timestamp: new Date().toLocaleString('fa-IR')
                });
            }
        }

        // --- Event Listeners ---
        trackBtn.addEventListener('click', handleTrack);

        // Allow pressing 'Enter' in the input field to trigger the track button
        trackingInput.addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                event.preventDefault();
                trackBtn.click();
            }
        });
    </script>

</body>
</html>
